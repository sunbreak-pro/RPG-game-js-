import{a as E,b as f}from"./item-THhyMDaV.js";const s=document.getElementById("lobby"),d=document.getElementById("select-player-area"),m=document.getElementById("shop-area"),I=document.getElementById("cooking-area"),w=document.getElementById("cooking-btn"),L=document.querySelectorAll(".safety-area-btn"),C=document.getElementById("shop-btn"),A=document.getElementById("prepare-battle-btn");A.addEventListener("click",()=>{console.log(d),s.style.display="none",d.style.display="block"});L.forEach(e=>{e.addEventListener("click",()=>{s.style.display="block",d.style.display="none",m.style.display="none",I.style.display="none"})});C.addEventListener("click",()=>{m.style.display="block",s.style.display="none",console.log(m)});w.addEventListener("click",()=>{s.style.display="none",I.style.display="block"});document.getElementById("start-button-buttle").addEventListener("click",()=>{const e=document.getElementById("alert-msg"),t=document.getElementById("player-name-input").value.trim(),n=p;if(n)e.textContent="";else{e.textContent="職業は必須です";return}if(t.length>=8||t.length<1){e.textContent="名前は１文字以上、もしくは8文字以内に設定してください";return}else e.textContent="";if(/^[ぁ-んァ-ン一-龥a-zA-Z0-9ー]+$/.test(t))e.textContent="";else{e.textContent="使用できない文字が含まれています（日本語・英数字のみ可）";return}const o=B.map(a=>({...E[a],amount:1})),c=h.map(a=>({...f[a],amount:1})),l={name:t,job:n,jobIndex:n==="戦士"?0:1,equipment:o,items:c};localStorage.setItem("playerData",JSON.stringify(l)),window.location.href="battleDisplay.html"});let p=null;const y=document.getElementById("select-warrior"),u=document.getElementById("select-mage");y.addEventListener("click",()=>{p="戦士",b(y,u)});u.addEventListener("click",()=>{p="魔法使い",b(u,y)});function b(e,t){e.classList.add("selected-class"),t.classList.remove("selected-class")}const B=[],h=[],q=document.getElementById("equipment-options"),x=document.getElementById("heal-item-options"),S=E.filter(e=>e.rarity==="common"),D=f.filter(e=>e.rarity==="common");k(S,q,B,2);k(D,x,h,2);function k(e,t,n,o){e.forEach((c,l)=>{const a=document.createElement("button");a.textContent=c.name,a.addEventListener("click",()=>{const g=n.indexOf(l);if(g!==-1)n.splice(g,1),a.classList.remove("selected-class");else{if(n.length>=o){alert(`最大${o}つまで選べます`);return}n.push(l),a.classList.add("selected-class")}}),t.appendChild(a)})}const v=document.getElementById("loading-area"),i=document.getElementById("loading-tittle"),r={show(e){i.animate([{opacity:0,transform:"translateY(-10rem)"},{opacity:1,transform:"translateY(0)"}],{duration:1e3,easing:"ease",fill:"forwards"}).onfinish=()=>{e()}},loading(e){let t=0;const n=setInterval(()=>{if(t+=3,t>100){clearInterval(n),e();return}const o=`linear-gradient(to right, red 0%, red ${t}%, #a5a5a5 ${t}%, #a5a5a5 100%)`;i.style.backgroundImage=o},50)},end(){i.animate([{opacity:1,transform:"translateY(0)"},{opacity:0,transform:"translateY(10rem)"}],{duration:1e3,easing:"ease",fill:"forwards"}),setTimeout(()=>{v.animate({opacity:[1,0],visibility:"hidden"},{duration:1e3,easing:"ease",fill:"forwards"})},500);const e=document.getElementById("main-content");e.style.display="block"}};async function P(){try{await new Promise(e=>r.show(e)),await new Promise(e=>r.loading(e)),await new Promise(e=>setTimeout(e,500))}catch(e){console.error("データの読み込みに失敗しました:",e)}finally{r.end()}}document.addEventListener("DOMContentLoaded",()=>{v.style.display="flex",P()});
